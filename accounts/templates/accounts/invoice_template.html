{% load static %}
{% load custom_tag %}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{% static 'invoices/css/invoice.css' %}">
    <h1>{{ title }}</h1>
    <meta name="description" content="Invoice demo sample">
    <meta name="author" content="Kozea">
  </head>

  <body>
    {% if object.form_type == 'Purchase Order'%}
    <h1>Purchase</h1>
    {% endif %}
    {% if object.form_type == 'Sales Order'%}
    <h1>Sales</h1>
    {% endif %}
    {% if object.form_type == 'Invoice'%}
    <h1>Invoice</h1>
    {% endif %}

    <aside>
      <address id="from">
        Weasyprint [ by Kozea ]
        107 boulevard de Stalingrad
        69100 Villeurbanne City
        France
      </address>

      {% if object.customer_name %}
      <address id="to">
        {{ object.customer_name }}
        {{ object.customer_phone }}
        {{ object.customer_email }}
        {{ object.customer_address }}
      </address>
      {% endif %}
    </aside>

    <dl id="informations">
      <dt>Reference Number</dt>
      {% if object.invoice_reference %}
        <dd>{{ object.invoice_reference }}</dd>
      {% endif %}
      <dt>Date</dt>
      {% if object.invoice_date %}
        <dd>{{ object.invoice_date | date:"d-m-Y" }}</dd>
      {% endif %}
    </dl>

    <table>
      <thead>
        <th>Desc.</th>
        <th>Price (RM)</th>
        <th>Qty</th>
        <th>Unit Disc. (%)</th>
        <th>Subtotal (RM)</th>
      </thead>
      <tbody>
        {% if object.has_products %}
            {% for product in object.has_products.all %}
              <tr>
                  <td class="prod_td" align="left">{{product.product_desc}}</td>
                  <td class="prod_td">{{product.product_unit_price}}</td>
                  <td class="prod_td">{{product.product_quantity}}</td>
                  <td class="prod_td">{{product.product_unit_disc}}</td>
                  <td class="prod_td">{{subtotal_arr|index:forloop.counter0}}</td>
              </tr>
            {% endfor %}
        {% endif %}
      </tbody>
    </table>

    <table id="total">
      <thead>
        <th>Due by</th>
        <th>Account number</th>
        <th>Total (RM)</th>
      </thead>
      <tbody>
        <tr>
          {% if object.due_date %}
            <td>{{ object.due_date | date:"d-m-Y" }}</td>
          {% endif %}
          <td>132 456 789 012</td>
          {% if total %}
            <td>{{ total }}</td>
          {% endif %}
        </tr>
      </tbody>
    </table>
  </body>
</html>